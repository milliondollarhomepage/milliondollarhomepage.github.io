import{c as u,r as p,u as w,j as e}from"./index-CeFg-jn1.js";const M=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],D=u("activity",M);const A=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],k=u("chart-column",A);const _=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],j=u("chart-pie",_);const C=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],S=u("trending-up",C),b=p.memo(({data:r,title:d,icon:i})=>{const a=Math.max(...r.map(l=>l.value));return e.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i,e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800",children:d})]}),e.jsx("div",{className:"space-y-3",children:r.map((l,g)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 truncate mr-2",children:l.label}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"font-medium",children:l.value.toLocaleString()}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",l.percentage.toFixed(1),"%)"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${l.color}`,style:{width:`${l.value/a*100}%`},role:"progressbar","aria-valuenow":l.percentage,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${l.label}: ${l.percentage.toFixed(1)}%`})})]},g))})]})});b.displayName="BarChart";const N=p.memo(({data:r,title:d,icon:i,centerValue:a,centerLabel:l})=>{let g=0;const h=r.map(c=>{const s=g*3.6;g+=c.percentage;const o=g*3.6;return{...c,startAngle:s,endAngle:o,path:F(50,50,35,20,s,o)}});return e.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i,e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800",children:d})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("svg",{width:"120",height:"120",viewBox:"0 0 100 100",className:"transform -rotate-90",children:h.map((c,s)=>e.jsx("path",{d:c.path,fill:T(c.color),className:"transition-all duration-300 hover:opacity-80"},s))}),a&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900",children:a}),l&&e.jsx("div",{className:"text-xs text-gray-500 text-center",children:l})]})]}),e.jsx("div",{className:"flex-1 space-y-2 min-w-0",children:r.map((c,s)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 ${c.color}`,"aria-hidden":"true"}),e.jsx("span",{className:"text-gray-600 truncate flex-1",children:c.label}),e.jsxs("span",{className:"font-medium flex-shrink-0",children:[c.value.toLocaleString()," (",c.percentage.toFixed(1),"%)"]})]},s))})]})]})});N.displayName="DonutChart";function F(r,d,i,a,l,g){const h=l*Math.PI/180,c=g*Math.PI/180,s=r+i*Math.cos(h),o=d+i*Math.sin(h),x=r+i*Math.cos(c),t=d+i*Math.sin(c),n=r+a*Math.cos(c),m=d+a*Math.sin(c),v=r+a*Math.cos(h),f=d+a*Math.sin(h),y=g-l<=180?"0":"1";return["M",s,o,"A",i,i,0,y,1,x,t,"L",n,m,"A",a,a,0,y,0,v,f,"Z"].join(" ")}function T(r){return{"bg-blue-500":"#3B82F6","bg-green-500":"#10B981","bg-red-500":"#EF4444","bg-yellow-500":"#F59E0B","bg-purple-500":"#8B5CF6","bg-pink-500":"#EC4899","bg-indigo-500":"#6366F1","bg-gray-500":"#6B7280"}[r]||"#6B7280"}const B=p.memo(()=>{const{appData:r,results:d,query:i}=w();if(!r)return null;const a=d.length>0?d:r.areas,l=p.useMemo(()=>{const s={},o=a.length;a.forEach(t=>{t.analytics?.dns_status?s[t.analytics.dns_status]=(s[t.analytics.dns_status]||0)+1:s["No Data"]=(s["No Data"]||0)+1});const x=["bg-green-500","bg-red-500","bg-yellow-500","bg-gray-500"];return Object.entries(s).sort(([,t],[,n])=>n-t).slice(0,4).map(([t,n],m)=>({label:t,value:n,percentage:n/o*100,color:x[m]||"bg-gray-500"}))},[a]),g=p.useMemo(()=>{const s={},o=a.length;a.forEach(t=>{if(t.analytics?.http_status!==void 0){const n=t.analytics.http_status.toString();s[n]=(s[n]||0)+1}else s["No Data"]=(s["No Data"]||0)+1});const x=["bg-green-500","bg-red-500","bg-yellow-500","bg-purple-500","bg-gray-500"];return Object.entries(s).sort(([,t],[,n])=>n-t).slice(0,5).map(([t,n],m)=>({label:t==="200"?"HTTP 200 (OK)":t==="0"?"No Response":`HTTP ${t}`,value:n,percentage:n/o*100,color:x[m]||"bg-gray-500"}))},[a]),h=p.useMemo(()=>{const s={},o=a.length;a.forEach(t=>{t.analytics?.whois_status?s[t.analytics.whois_status]=(s[t.analytics.whois_status]||0)+1:s["No Data"]=(s["No Data"]||0)+1});const x=["bg-blue-500","bg-indigo-500","bg-gray-500"];return Object.entries(s).sort(([,t],[,n])=>n-t).slice(0,3).map(([t,n],m)=>({label:t.charAt(0).toUpperCase()+t.slice(1),value:n,percentage:n/o*100,color:x[m]||"bg-gray-500"}))},[a]),c=p.useMemo(()=>{const s=a.filter(t=>t.hasAnalytics).length,o=a.length-s,x=a.length;return[{label:"With Analytics",value:s,percentage:s/x*100,color:"bg-green-500"},{label:"Without Analytics",value:o,percentage:o/x*100,color:"bg-gray-500"}]},[a]);return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-800",children:i?"Search Results Analytics":"Data Visualization"})]}),i&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["Visualizing data for ",e.jsxs("span",{className:"font-medium",children:['"',i,'"']})," ","(",a.length," result",a.length!==1?"s":"",")"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(N,{data:c,title:"Analytics Coverage",icon:e.jsx(j,{className:"w-5 h-5 text-blue-600"}),centerValue:a.length.toLocaleString(),centerLabel:"Total Domains"}),e.jsx(b,{data:l,title:"DNS Status Distribution",icon:e.jsx(k,{className:"w-5 h-5 text-green-600"})}),e.jsx(b,{data:g,title:"HTTP Status Distribution",icon:e.jsx(S,{className:"w-5 h-5 text-purple-600"})}),e.jsx(N,{data:h,title:"Domain Registration Status",icon:e.jsx(j,{className:"w-5 h-5 text-indigo-600"})})]}),!i&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 sm:p-6 border border-blue-200",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-3",children:"Quick Insights"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[(c[0]?.percentage||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-gray-600",children:"Have Analytics"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(l.find(s=>s.label==="NOERROR")?.percentage||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-gray-600",children:"DNS Resolved"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[(g.find(s=>s.label.includes("200"))?.percentage||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-gray-600",children:"HTTP Success"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[(h.find(s=>s.label==="Registered")?.percentage||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-gray-600",children:"Registered"})]})]})]})]})});B.displayName="DataVisualization";export{B as DataVisualization};
//# sourceMappingURL=DataVisualization-C3uNT9un.js.map
