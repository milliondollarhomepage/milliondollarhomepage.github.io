import{r as s,a as U,f as ae,b as re,P as ie,L as oe,c as _,j as t,m as V,u as ce}from"./index-CeFg-jn1.js";function J(){const n=s.useRef(!1);return U(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function le(){const n=J(),[l,r]=s.useState(0),c=s.useCallback(()=>{n.current&&r(l+1)},[l]);return[s.useCallback(()=>ae.postRender(c),[c]),l]}class de extends s.Component{getSnapshotBeforeUpdate(l){const r=this.props.childRef.current;if(r&&l.isPresent&&!this.props.isPresent){const c=this.props.sizeRef.current;c.height=r.offsetHeight||0,c.width=r.offsetWidth||0,c.top=r.offsetTop,c.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function me({children:n,isPresent:l}){const r=s.useId(),c=s.useRef(null),M=s.useRef({width:0,height:0,top:0,left:0});return s.useInsertionEffect(()=>{const{width:d,height:i,top:m,left:k}=M.current;if(l||!c.current||!d||!i)return;c.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${i}px !important;
            top: ${m}px !important;
            left: ${k}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[l]),s.createElement(de,{isPresent:l,childRef:c,sizeRef:M},s.cloneElement(n,{ref:c}))}const Y=({children:n,initial:l,isPresent:r,onExitComplete:c,custom:M,presenceAffectsLayout:d,mode:i})=>{const m=re(ue),k=s.useId(),u=s.useMemo(()=>({id:k,initial:l,isPresent:r,custom:M,onExitComplete:o=>{m.set(o,!0);for(const p of m.values())if(!p)return;c&&c()},register:o=>(m.set(o,!1),()=>m.delete(o))}),d?void 0:[r]);return s.useMemo(()=>{m.forEach((o,p)=>m.set(p,!1))},[r]),s.useEffect(()=>{!r&&!m.size&&c&&c()},[r]),i==="popLayout"&&(n=s.createElement(me,{isPresent:r},n)),s.createElement(ie.Provider,{value:u},n)};function ue(){return new Map}function he(n){return s.useEffect(()=>()=>n(),[])}const $=n=>n.key||"";function pe(n,l){n.forEach(r=>{const c=$(r);l.set(c,r)})}function xe(n){const l=[];return s.Children.forEach(n,r=>{s.isValidElement(r)&&l.push(r)}),l}const fe=({children:n,custom:l,initial:r=!0,onExitComplete:c,exitBeforeEnter:M,presenceAffectsLayout:d=!0,mode:i="sync"})=>{const m=s.useContext(oe).forceRender||le()[0],k=J(),u=xe(n);let o=u;const p=s.useRef(new Map).current,H=s.useRef(o),E=s.useRef(new Map).current,T=s.useRef(!0);if(U(()=>{T.current=!1,pe(u,E),H.current=o}),he(()=>{T.current=!0,E.clear(),p.clear()}),T.current)return s.createElement(s.Fragment,null,o.map(x=>s.createElement(Y,{key:$(x),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:d,mode:i},x)));o=[...o];const C=H.current.map($),F=u.map($),S=C.length;for(let x=0;x<S;x++){const y=C[x];F.indexOf(y)===-1&&!p.has(y)&&p.set(y,void 0)}return i==="wait"&&p.size&&(o=[]),p.forEach((x,y)=>{if(F.indexOf(y)!==-1)return;const R=E.get(y);if(!R)return;const W=C.indexOf(y);let I=x;if(!I){const z=()=>{p.delete(y);const L=Array.from(E.keys()).filter(A=>!F.includes(A));if(L.forEach(A=>E.delete(A)),H.current=u.filter(A=>{const O=$(A);return O===y||L.includes(O)}),!p.size){if(k.current===!1)return;m(),c&&c()}};I=s.createElement(Y,{key:$(R),isPresent:!1,onExitComplete:z,custom:l,presenceAffectsLayout:d,mode:i},R),p.set(y,I)}o.splice(W,0,I)}),o=o.map(x=>{const y=x.key;return p.has(y)?x:s.createElement(Y,{key:$(x),isPresent:!0,presenceAffectsLayout:d,mode:i},x)}),s.createElement(s.Fragment,null,p.size?o:o.map(x=>s.cloneElement(x)))};const ge=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ye=_("calendar",ge);const ve=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],be=_("clock",ve);const we=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ne=_("external-link",we);const je=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Me=_("flag",je);const ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],G=_("globe",ke);const Ee=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Ae=_("server",Ee);const Ce=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Re=_("shopping-cart",Ce),Q=s.memo(({tooltip:n})=>{if(!n.visible)return null;const l=s.useMemo(()=>i=>{try{return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}},[]),r=s.useMemo(()=>(i,m)=>{switch(m){case"dns":return i==="NOERROR"?"text-green-600 bg-green-50":"text-red-600 bg-red-50";case"http":return i===200?"text-green-600 bg-green-50":"text-red-600 bg-red-50";case"whois":return i==="registered"?"text-blue-600 bg-blue-50":"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},[]),c=s.useMemo(()=>n.analytics?{registered:n.analytics.registered_at?l(n.analytics.registered_at):"unavailable",expiry:n.analytics.expiry_date?l(n.analytics.expiry_date):"unavailable",analyzed:n.analytics.analyzed_at?l(n.analytics.analyzed_at):"unavailable"}:{},[n.analytics,l]),M=s.useMemo(()=>n.analytics?.nameservers?.length?n.analytics.nameservers:null,[n.analytics?.nameservers]),d=s.useMemo(()=>{let u=n.position.x+5,o=n.position.y+5;return u+320>window.innerWidth-20&&(u=n.position.x-320-5),u<20&&(u=20),o+300>window.innerHeight-20&&(o=n.position.y-300+100),o<20&&(o=20),{left:u,top:o}},[n.position.x,n.position.y]);return t.jsx(fe,{children:t.jsx(V.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{duration:.15},className:"fixed z-50 pointer-events-none",style:{left:d.left,top:d.top,maxWidth:"320px"},children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-gray-200 p-4 max-w-sm",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 truncate flex items-center gap-2",children:[t.jsx(G,{className:"w-4 h-4 flex-shrink-0"}),n.domain]}),n.title&&t.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:n.title})]}),t.jsx("a",{href:`http://${n.domain}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1 text-gray-400 hover:text-blue-600 pointer-events-auto transition-colors",title:`Visit ${n.domain}`,"aria-label":`Visit ${n.domain} in new tab`,children:t.jsx(Ne,{className:"w-4 h-4"})})]}),n.analytics?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium ${r(n.analytics.dns_status,"dns")}`,children:[t.jsx(G,{className:"w-3 h-3"}),n.analytics.dns_status]}),t.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium ${r(n.analytics.http_status,"http")}`,children:[t.jsx(Me,{className:"w-3 h-3"}),n.analytics.http_status]}),t.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium ${r(n.analytics.whois_status,"whois")}`,children:[t.jsx(Re,{className:"w-3 h-3"}),n.analytics.whois_status]})]}),n.analytics.whois_status==="registered"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(ye,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:"Registered:"}),t.jsx("span",{className:"font-medium",children:c.registered})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(be,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:"Expires:"}),t.jsx("span",{className:"font-medium",children:c.expiry})]}),M&&t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:"Nameservers:"})]}),t.jsx("div",{className:"ml-6 space-y-1",children:M.map((i,m)=>t.jsx("div",{className:"text-xs text-gray-700 font-mono",children:i},m))})]})]}),t.jsx("div",{className:"pt-2 border-t border-gray-100",children:t.jsxs("div",{className:"text-xs text-gray-500",children:["Analyzed: ",c.analyzed]})})]}):t.jsxs("div",{className:"text-center py-3 sm:py-4",children:[t.jsx("div",{className:"text-gray-400 mb-2",children:t.jsx(G,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto"})}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"No analytics data available"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This domain was not included in the analysis"})]})]})})})});Q.displayName="DomainTooltip";const B={ORIGINAL_WIDTH:1e3,ORIGINAL_HEIGHT:1e3},q={OFFSET_X:15,OFFSET_Y:-10},$e=s.memo(n=>{const{onDomainSelect:l,onAreaHover:r,className:c,"data-testid":M}=n,{appData:d,selectedDomain:i,highlightedAreas:m,setSelectedDomain:k}=ce(),[u,o]=s.useState({domain:"",title:"",analytics:null,position:{x:0,y:0},visible:!1}),[p,H]=s.useState(!1),[E,T]=s.useState(!1),[C,F]=s.useState([]),S=s.useRef(null),x=s.useRef(null),y=s.useRef(null),R=s.useRef(!1),W=s.useMemo(()=>e=>{try{return new URL(e).hostname.replace("www.","")}catch{const a=e.match(/\/\/(?:www\.)?([^/]+)/);return a?a[1]:e}},[]);s.useEffect(()=>{if(R.current)return;(async()=>{try{R.current=!0;const f=await(await fetch("/extracted-map.html")).text(),h=new DOMParser().parseFromString(f,"text/html").querySelectorAll("area"),j=Array.from(h).map(b=>{const w=b.getAttribute("href")||"",N=b.getAttribute("coords")||"",D=b.getAttribute("title")||"";return{coords:N,href:w,title:D,domain:W(w)}});F(j),console.log(`InteractiveMap: Loading HTML map areas (component render #${Date.now()})`)}catch(a){console.error("Failed to load HTML map areas:",a),R.current=!1}})()},[]);const I=s.useCallback(e=>{u.visible&&(y.current&&cancelAnimationFrame(y.current),y.current=requestAnimationFrame(()=>{o(a=>({...a,position:{x:e.clientX+q.OFFSET_X,y:e.clientY+q.OFFSET_Y}}))}))},[u.visible]),z=s.useMemo(()=>{if(!d?.areas)return new Map;const e=new Map;return d.areas.forEach(a=>{e.set(a.domain,a)}),e},[d?.areas]),L=s.useCallback((e,a)=>{const f="analytics"in e,g=e.domain,v=e.title;let h=f?e.analytics:null;f||(h=z.get(g)?.analytics||null);const j=200,b=window.innerHeight,w=a.clientY,N=w>b/2||w+j>b-20;o({domain:g,title:v,analytics:h,position:{x:a.clientX+q.OFFSET_X,y:N?a.clientY-j-10:a.clientY+q.OFFSET_Y},visible:!0}),r?.(e)},[z,r]),A=s.useCallback(()=>{o(e=>({...e,visible:!1}))},[]),O=s.useCallback(e=>{k(e.domain),l?.(e.domain),o(f=>({...f,visible:!1}));const a=e.domain.startsWith("http")?e.domain:`https://${e.domain}`;window.open(a,"_blank","noopener,noreferrer"),setTimeout(()=>{window.location.reload()},100)},[k,l]);s.useEffect(()=>{if(i&&S.current&&d){const e=d.areas.find(a=>a.domain===i);if(e){const a=e.coordinates.x+e.coordinates.width/2,f=e.coordinates.y+e.coordinates.height/2,g=S.current,v=g.getBoundingClientRect();g.scrollTo({left:a-v.width/2,top:f-v.height/2,behavior:"smooth"})}}},[i,d]),s.useEffect(()=>{i&&o(e=>({...e,visible:!1}))},[i]);const Z=s.useCallback(e=>{e.target===e.currentTarget&&k(null)},[k]);if(!d)return t.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-100 rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading map data..."})]})});const K=s.useCallback(e=>m.includes(e)||i===e,[m,i]),ee=s.useCallback(e=>i===e?"rgba(59, 130, 246, 0.6)":m.includes(e)?"rgba(16, 185, 129, 0.4)":"transparent",[i,m]),P=s.useMemo(()=>C.length>0?C:d?.areas||[],[C,d?.areas]),{highlightedAreasToRender:te,nonHighlightedAreas:se}=s.useMemo(()=>{const e=[],a=[];return P.forEach(f=>{const g=f.domain;K(g)?e.push(f):a.push(f)}),{highlightedAreasToRender:e,nonHighlightedAreas:a}},[P,K]),X=s.useMemo(()=>{const e=new Map;return P.forEach((a,f)=>{const g="coords"in a,v=g?`html-${a.domain}-${a.coords}-${f}`:`area-${a.id||f}-${a.domain}`;if(g){const h=a.coords.split(",").map(Number);if(h.length===4&&!h.some(isNaN)){const j=Math.min(h[0],h[2]),b=Math.min(h[1],h[3]),w=Math.abs(h[2]-h[0]),N=Math.abs(h[3]-h[1]);j>=0&&b>=0&&j+w<=B.ORIGINAL_WIDTH&&b+N<=B.ORIGINAL_HEIGHT&&w>0&&N>0?e.set(v,{x:j,y:b,width:w,height:N}):e.set(v,null)}else e.set(v,null)}else e.set(v,{x:a.coordinates.x,y:a.coordinates.y,width:a.coordinates.width,height:a.coordinates.height})}),e},[P]);return t.jsxs("div",{className:`map-container-fullscreen ${c||""}`,"data-testid":M,children:[t.jsx("div",{ref:S,className:"relative h-full w-full overflow-auto flex items-center justify-center",onMouseMove:I,onClick:Z,role:"img","aria-label":"Interactive Million Dollar Homepage pixel map",tabIndex:0,style:{paddingTop:"max(250px, 10vh",paddingBottom:"2vh"},children:t.jsxs("div",{className:"relative",style:{minHeight:"1000px",minWidth:"1000px"},children:[t.jsx("img",{ref:x,src:"/image-map.png",alt:"Million Dollar Homepage - Interactive pixel map with domain analytics",className:`native-resolution-image transition-opacity duration-300 pixel-art ${p?"opacity-100":"opacity-0"}`,style:{width:"1000px",height:"1000px",maxWidth:"none",maxHeight:"none",objectFit:"none",display:"block"},onLoad:()=>{H(!0)},onError:()=>{T(!0),H(!0)},loading:"eager",decoding:"async",crossOrigin:"anonymous"}),!p&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 min-h-[300px]",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-blue-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-600",role:"status","aria-live":"polite",children:"Loading image..."})]})}),E&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 min-h-[300px]",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("p",{className:"text-red-600 mb-2 text-sm sm:text-base",children:"Failed to load image"}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Unable to load the Million Dollar Homepage image from the original server"})]})}),p&&!E&&x.current&&t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"absolute pointer-events-none",style:{zIndex:10,left:0,top:0,width:"1000px",height:"1000px",overflow:"visible"},viewBox:"0 0 1000 1000",preserveAspectRatio:"none","aria-hidden":"true",children:te.map((e,a)=>{const g="coords"in e?`html-${e.domain}-${e.coords}-${a}`:`area-${e.id||a}-${e.domain}`,v=X.get(g);if(!v)return null;const{x:h,y:j,width:b,height:w}=v,N=e.domain;return t.jsx(V.rect,{x:h,y:j,width:b,height:w,fill:ee(N),stroke:i===N?"#3B82F6":"#10B981",strokeWidth:2,className:"pointer-events-auto cursor-pointer",initial:{opacity:0},animate:{opacity:1,scale:i===N?1.05:1},transition:{duration:.2},onMouseEnter:D=>{const ne={clientX:D.nativeEvent.clientX,clientY:D.nativeEvent.clientY};L(e,ne)},onMouseLeave:A,onClick:()=>O(e),whileHover:{opacity:.8,transition:{duration:.1}}},`svg-highlighted-${a}-${g}`)})}),t.jsx("div",{className:"absolute pointer-events-none",style:{zIndex:5,left:0,top:0,width:"1000px",height:"1000px",overflow:"hidden"},children:se.map((e,a)=>{const g="coords"in e?`html-${e.domain}-${e.coords}-${a}`:`area-${e.id||a}-${e.domain}`,v=X.get(g);if(!v)return null;const{x:h,y:j,width:b,height:w}=v;return t.jsx("div",{className:"absolute cursor-pointer hover:bg-blue-200 hover:bg-opacity-30 transition-colors pointer-events-auto",style:{left:`${h}px`,top:`${j}px`,width:`${b}px`,height:`${w}px`},onMouseEnter:N=>L(e,N),onMouseLeave:A,onClick:()=>O(e)},`clickable-nonhighlighted-${a}-${g}`)})})]})]})}),t.jsx(Q,{tooltip:u})]})});$e.displayName="InteractiveMap";export{$e as InteractiveMap};
//# sourceMappingURL=InteractiveMap-JJ2GHCv2.js.map
