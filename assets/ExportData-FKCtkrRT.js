import{c as u,r as c,u as E,j as e}from"./index-BXlEHId3.js";const T=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],A=u("code",T);const O=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$=u("download",O);const D=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],H=u("file-text",D);const F=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],M=u("table",F),z=c.memo(()=>{const{appData:d,results:h,query:o,filters:r}=E(),[j,k]=c.useState(!1),[m,y]=c.useState(!1),[n,p]=c.useState({format:"csv",includeAnalytics:!0,includeCoordinates:!1,includeTimestamps:!0,onlyFiltered:!0}),g=c.useCallback(()=>n.onlyFiltered&&h.length>0?[...h]:d?.areas?[...d.areas]:[],[d,h,n.onlyFiltered]),N=c.useCallback(a=>{const s=["Domain","Title"];n.includeCoordinates&&s.push("X","Y","Width","Height"),n.includeAnalytics&&s.push("DNS Status","HTTP Status","WHOIS Status","Has Analytics"),n.includeTimestamps&&s.push("Registered At","Expiry Date","Analyzed At");const i=[s.join(",")];return a.forEach(t=>{const l=[`"${t.domain}"`,`"${t.title||""}"`];n.includeCoordinates&&l.push(t.coordinates.x.toString(),t.coordinates.y.toString(),t.coordinates.width.toString(),t.coordinates.height.toString()),n.includeAnalytics&&l.push(`"${t.analytics?.dns_status||""}"`,`"${t.analytics?.http_status||""}"`,`"${t.analytics?.whois_status||""}"`,t.hasAnalytics?"true":"false"),n.includeTimestamps&&l.push(`"${t.analytics?.registered_at||""}"`,`"${t.analytics?.expiry_date||""}"`,`"${t.analytics?.analyzed_at||""}"`),i.push(l.join(","))}),i.join(`
`)},[n]),_=c.useCallback(a=>{const s=a.map(t=>{const l={domain:t.domain,title:t.title||null};return n.includeCoordinates&&(l.coordinates=t.coordinates),n.includeAnalytics&&t.analytics&&(l.analytics={dns_status:t.analytics.dns_status,http_status:t.analytics.http_status,whois_status:t.analytics.whois_status,has_analytics:t.hasAnalytics},n.includeTimestamps&&(l.analytics.registered_at=t.analytics.registered_at,l.analytics.expiry_date=t.analytics.expiry_date,l.analytics.analyzed_at=t.analytics.analyzed_at),t.analytics.nameservers&&(l.analytics.nameservers=t.analytics.nameservers)),l}),i={metadata:{exported_at:new Date().toISOString(),total_records:a.length,query:o||null,filters:Object.keys(r).length>0?r:null,export_options:n},data:s};return JSON.stringify(i,null,2)},[n,o,r]),v=c.useCallback(a=>{const s=["Million Dollar Homepage - Domain Export","=====================================",`Exported: ${new Date().toLocaleString()}`,`Total Records: ${a.length}`,o?`Search Query: "${o}"`:"",Object.keys(r).length>0?`Filters Applied: ${Object.keys(r).length}`:"","","Domains:","--------"].filter(Boolean);return a.forEach((i,t)=>{s.push(`${t+1}. ${i.domain}`),i.title&&s.push(`   Title: ${i.title}`),n.includeAnalytics&&i.analytics&&(s.push(`   DNS: ${i.analytics.dns_status||"N/A"}`),s.push(`   HTTP: ${i.analytics.http_status||"N/A"}`),s.push(`   WHOIS: ${i.analytics.whois_status||"N/A"}`)),n.includeCoordinates&&s.push(`   Position: ${i.coordinates.x},${i.coordinates.y} (${i.coordinates.width}x${i.coordinates.height})`),s.push("")}),s.join(`
`)},[n,o,r]),S=c.useCallback(async()=>{k(!0);try{const a=g();let s,i,t;const l=new Date().toISOString().split("T")[0],f=o?`mdh-search-${o.replace(/[^a-zA-Z0-9]/g,"_")}-${l}`:`mdh-domains-${l}`;switch(n.format){case"csv":s=N(a),i=`${f}.csv`,t="text/csv";break;case"json":s=_(a),i=`${f}.json`,t="application/json";break;case"txt":s=v(a),i=`${f}.txt`,t="text/plain";break;default:throw new Error("Unsupported export format")}const C=new Blob([s],{type:t}),w=URL.createObjectURL(C),x=document.createElement("a");x.href=w,x.download=i,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(w),y(!1)}catch(a){console.error("Export failed:",a),alert("Export failed. Please try again.")}finally{k(!1)}},[n,g,N,_,v,o]),b=g().length;return d?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>y(!m),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm sm:text-base","aria-expanded":m,"aria-label":"Export data options",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export Data"}),e.jsx("span",{className:"sm:hidden",children:"Export"}),e.jsx("span",{className:"bg-green-500 px-2 py-0.5 rounded-full text-xs",children:b.toLocaleString()})]}),m&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 p-4 z-50",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 mb-2",children:"Export Options"}),e.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["Exporting ",b.toLocaleString()," domain",b!==1?"s":"",o&&` matching "${o}"`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Format"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"csv",label:"CSV",icon:M},{value:"json",label:"JSON",icon:A},{value:"txt",label:"TXT",icon:H}].map(({value:a,label:s,icon:i})=>e.jsxs("button",{onClick:()=>p(t=>({...t,format:a})),className:`flex flex-col items-center gap-1 p-2 rounded-lg border transition-colors ${n.format===a?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:s})]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Include"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:n.onlyFiltered,onChange:a=>p(s=>({...s,onlyFiltered:a.target.checked})),className:"rounded mr-2"}),"Only filtered results (",h.length>0?h.length:d.areas.length," domains)"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:n.includeAnalytics,onChange:a=>p(s=>({...s,includeAnalytics:a.target.checked})),className:"rounded mr-2"}),"Analytics data (DNS, HTTP, WHOIS)"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:n.includeCoordinates,onChange:a=>p(s=>({...s,includeCoordinates:a.target.checked})),className:"rounded mr-2"}),"Pixel coordinates"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:n.includeTimestamps,onChange:a=>p(s=>({...s,includeTimestamps:a.target.checked})),className:"rounded mr-2"}),"Timestamps (registration, expiry, analysis)"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-3 py-2 text-sm text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:j,className:"flex-1 px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),"Export"]})})]})]})})]}):null});z.displayName="ExportData";export{z as ExportData};
//# sourceMappingURL=ExportData-FKCtkrRT.js.map
